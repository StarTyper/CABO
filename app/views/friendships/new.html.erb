<div class="container">
  <h1>New Friendship</h1>

  <div class="row justify-content-center">
    <div class="col-sm-8 my-3">
      <%= simple_form_for :query, url: new_user_friendship_path, method: :get, html: { class: "d-flex" } do |f| %>
        <%= f.input :query,
          value: params[:query],
          input_html: { class: "form-control", placeholder: "Type a username" } %>
        <%= f.button :submit, "Search", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>

  <%= simple_form_for [@user, @friendship] do |f| %>
    <div class="input">
      <label>My Username</label>
      <input type="text" value="<%= @user.username %>" readonly="readonly" class="form-control">
    </div>
    <%= f.input :user2_id, label: "Friend's Username", collection: @users, label_method: :username, value_method: :id, prompt: 'Select user' %>
    <%= f.button :submit, "Add Friendship" %>
  <% end %>

  <div class="row justify-content-center">
    <div class="col-sm-8">
      <div id="friendship-results">
        <% if @users.any? %>
          <h4>Search Results:</h4>
          <% @users.each do |user| %>
            <p><%= user.username %></p>
          <% end %>
        <% else %>
          <em>Sorry, no users found matching your query.</em>
        <% end %>
      </div>
    </div>
  </div>
</div>
